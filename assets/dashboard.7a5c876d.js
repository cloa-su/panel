(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{416:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(293),c=a(262),l=a(15),o=a(28),s=a(57),m=a(263),d=a(1),p=a(260),u=a(56),g=a(27),y=a(17),w=a(179),b=a(180),h=a(24),f=a(34),v=a.n(f),_=()=>r.a.createElement(r.a.Fragment,null),E=()=>r.a.createElement(r.a.Fragment,null),S=()=>r.a.createElement(r.a.Fragment,null),x=()=>r.a.createElement(r.a.Fragment,null),j=()=>r.a.createElement(r.a.Fragment,null);const O=(e,t)=>t>0&&e/(1024*t*1024)>=.9,C=Object(n.memo)(Object(d.c)(u.a).withConfig({displayName:"ServerRow__Icon",componentId:"sc-1ibsw91-0"})(["",";"],(e=>e.$alarm?{"--tw-text-opacity":"1",color:"rgba(248, 113, 113, var(--tw-text-opacity))"}:{"--tw-text-opacity":"1",color:"hsla(211, 12%, 43%, var(--tw-text-opacity))"})),v.a),k=d.c.p.withConfig({displayName:"ServerRow__IconDescription",componentId:"sc-1ibsw91-1"})(["",";",";"],{fontSize:"0.875rem",lineHeight:"1.25rem",marginLeft:"0.5rem"},(e=>e.$alarm?{"--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))"}:{"--tw-text-opacity":"1",color:"hsla(211, 10%, 53%, var(--tw-text-opacity))"})),I=Object(d.c)(b.a).withConfig({displayName:"ServerRow__StatusIndicatorBox",componentId:"sc-1ibsw91-2"})(["",";& .status-bar{",";height:calc(100% - 0.5rem);",";}&:hover .status-bar{",";}"],{display:"grid",gridTemplateColumns:"repeat(12, minmax(0, 1fr))",gap:"1rem",position:"relative"},{width:"0.5rem","--tw-bg-opacity":"1",backgroundColor:"rgba(239, 68, 68, var(--tw-bg-opacity))",position:"absolute",right:"0px",zIndex:"20",borderRadius:"9999px",margin:"0.25rem",opacity:"0.5",transitionProperty:"all",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"150ms"},(e=>{let{$status:t}=e;return t&&"offline"!==t?"running"===t?{"--tw-bg-opacity":"1",backgroundColor:"rgba(16, 185, 129, var(--tw-bg-opacity))"}:{"--tw-bg-opacity":"1",backgroundColor:"rgba(245, 158, 11, var(--tw-bg-opacity))"}:{"--tw-bg-opacity":"1",backgroundColor:"rgba(239, 68, 68, var(--tw-bg-opacity))"}}),{opacity:"0.75"});var N=Object(d.c)("div").withConfig({displayName:"ServerRow___StyledDiv",componentId:"sc-1ibsw91-3"})({gridColumn:"span 12 / span 12",display:"flex",alignItems:"center","@media (min-width: 640px)":{gridColumn:"span 5 / span 5"},"@media (min-width: 1024px)":{gridColumn:"span 6 / span 6"}}),R=Object(d.c)("p").withConfig({displayName:"ServerRow___StyledP",componentId:"sc-1ibsw91-4"})({fontSize:"1.125rem",lineHeight:"1.75rem",overflowWrap:"break-word"}),D=Object(d.c)("p").withConfig({displayName:"ServerRow___StyledP2",componentId:"sc-1ibsw91-5"})({fontSize:"0.875rem",lineHeight:"1.25rem","--tw-text-opacity":"1",color:"hsla(211, 13%, 65%, var(--tw-text-opacity))",overflowWrap:"break-word",overflow:"hidden",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"2"}),F=Object(d.c)("div").withConfig({displayName:"ServerRow___StyledDiv2",componentId:"sc-1ibsw91-6"})({flex:"1 1 0%",marginLeft:"1rem",display:"none","@media (min-width: 1024px)":{gridColumn:"span 2 / span 2",display:"block"}}),P=Object(d.c)("div").withConfig({displayName:"ServerRow___StyledDiv3",componentId:"sc-1ibsw91-7"})({display:"flex",justifyContent:"center"}),z=Object(d.c)(u.a).withConfig({displayName:"ServerRow___StyledFontAwesomeIcon",componentId:"sc-1ibsw91-8"})({"--tw-text-opacity":"1",color:"hsla(211, 12%, 43%, var(--tw-text-opacity))"}),T=Object(d.c)("p").withConfig({displayName:"ServerRow___StyledP3",componentId:"sc-1ibsw91-9"})({fontSize:"0.875rem",lineHeight:"1.25rem","--tw-text-opacity":"1",color:"hsla(211, 10%, 53%, var(--tw-text-opacity))",marginLeft:"0.5rem"}),B=Object(d.c)("div").withConfig({displayName:"ServerRow___StyledDiv4",componentId:"sc-1ibsw91-10"})({gridColumn:"span 7 / span 7",display:"none",alignItems:"baseline",justifyContent:"center","@media (min-width: 640px)":{display:"flex"},"@media (min-width: 1024px)":{gridColumn:"span 4 / span 4"}}),U=Object(d.c)("div").withConfig({displayName:"ServerRow___StyledDiv5",componentId:"sc-1ibsw91-11"})({flex:"1 1 0%",textAlign:"center"}),A=Object(d.c)("span").withConfig({displayName:"ServerRow___StyledSpan",componentId:"sc-1ibsw91-12"})({"--tw-bg-opacity":"1",backgroundColor:"rgba(239, 68, 68, var(--tw-bg-opacity))",borderRadius:"0.25rem",paddingLeft:"0.5rem",paddingRight:"0.5rem",paddingTop:"0.25rem",paddingBottom:"0.25rem","--tw-text-opacity":"1",color:"rgba(254, 226, 226, var(--tw-text-opacity))",fontSize:"0.75rem",lineHeight:"1rem"}),H=Object(d.c)("div").withConfig({displayName:"ServerRow___StyledDiv6",componentId:"sc-1ibsw91-13"})({flex:"1 1 0%",textAlign:"center"}),$=Object(d.c)("span").withConfig({displayName:"ServerRow___StyledSpan2",componentId:"sc-1ibsw91-14"})({"--tw-bg-opacity":"1",backgroundColor:"hsla(211, 12%, 43%, var(--tw-bg-opacity))",borderRadius:"0.25rem",paddingLeft:"0.5rem",paddingRight:"0.5rem",paddingTop:"0.25rem",paddingBottom:"0.25rem","--tw-text-opacity":"1",color:"hsla(214, 15%, 91%, var(--tw-text-opacity))",fontSize:"0.75rem",lineHeight:"1rem"}),L=Object(d.c)("div").withConfig({displayName:"ServerRow___StyledDiv7",componentId:"sc-1ibsw91-15"})({flex:"1 1 0%",marginLeft:"1rem",display:"none","@media (min-width: 640px)":{display:"block"}}),W=Object(d.c)("div").withConfig({displayName:"ServerRow___StyledDiv8",componentId:"sc-1ibsw91-16"})({display:"flex",justifyContent:"center"}),J=Object(d.c)("p").withConfig({displayName:"ServerRow___StyledP4",componentId:"sc-1ibsw91-17"})({fontSize:"0.75rem",lineHeight:"1rem","--tw-text-opacity":"1",color:"hsla(209, 14%, 37%, var(--tw-text-opacity))",textAlign:"center",marginTop:"0.25rem"}),K=Object(d.c)("div").withConfig({displayName:"ServerRow___StyledDiv9",componentId:"sc-1ibsw91-18"})({flex:"1 1 0%",marginLeft:"1rem",display:"none","@media (min-width: 640px)":{display:"block"}}),Q=Object(d.c)("div").withConfig({displayName:"ServerRow___StyledDiv10",componentId:"sc-1ibsw91-19"})({display:"flex",justifyContent:"center"}),q=Object(d.c)("p").withConfig({displayName:"ServerRow___StyledP5",componentId:"sc-1ibsw91-20"})({fontSize:"0.75rem",lineHeight:"1rem","--tw-text-opacity":"1",color:"hsla(209, 14%, 37%, var(--tw-text-opacity))",textAlign:"center",marginTop:"0.25rem"}),G=Object(d.c)("div").withConfig({displayName:"ServerRow___StyledDiv11",componentId:"sc-1ibsw91-21"})({flex:"1 1 0%",marginLeft:"1rem",display:"none","@media (min-width: 640px)":{display:"block"}}),M=Object(d.c)("div").withConfig({displayName:"ServerRow___StyledDiv12",componentId:"sc-1ibsw91-22"})({display:"flex",justifyContent:"center"}),V=Object(d.c)("p").withConfig({displayName:"ServerRow___StyledP6",componentId:"sc-1ibsw91-23"})({fontSize:"0.75rem",lineHeight:"1rem","--tw-text-opacity":"1",color:"hsla(209, 14%, 37%, var(--tw-text-opacity))",textAlign:"center",marginTop:"0.25rem"}),X=a(58),Y=a(155),Z=a(2),ee=a(264),te=a(199),ae=a(174),ne=a(265),re=()=>r.a.createElement(r.a.Fragment,null),ie=()=>r.a.createElement(r.a.Fragment,null),ce=()=>{const{search:e}=Object(o.g)(),t=Number(new URLSearchParams(e).get("page")||"1"),[a,i]=Object(n.useState)(!isNaN(t)&&t>0?t:1),{clearFlashes:c,clearAndAddHttpError:l}=Object(Y.a)(),s=Object(Z.useStoreState)((e=>e.user.data.uuid)),m=Object(Z.useStoreState)((e=>e.user.data.rootAdmin)),[d,u]=Object(ee.a)("".concat(s,":show_all_servers"),!1),{data:g,error:y}=Object(ae.a)(["/api/client/servers",d&&m,a],(()=>Object(p.a)({page:a,type:d&&m?"admin":void 0})));return Object(n.useEffect)((()=>{g&&g.pagination.currentPage>1&&!g.items.length&&i(1)}),[null==g?void 0:g.pagination.currentPage]),Object(n.useEffect)((()=>{window.history.replaceState(null,document.title,"/".concat(a<=1?"":"?page=".concat(a)))}),[a]),Object(n.useEffect)((()=>{y&&l({key:"dashboard",error:y}),y||c("dashboard")}),[y]),r.a.createElement(X.a,{title:"Dashboard",showFlashKey:"dashboard"},r.a.createElement(re,null),m&&r.a.createElement(le,null,r.a.createElement(oe,null,d?"Showing others' servers":"Showing your servers"),r.a.createElement(te.a,{name:"show_all_servers",defaultChecked:d,onChange:()=>u((e=>!e))})),g?r.a.createElement(ne.a,{data:g,onPageSelect:i},(e=>{let{items:t}=e;return t.length>0?t.map(((e,t)=>r.a.createElement(se,{key:e.uuid,server:e,$_css:t>0?{marginTop:"0.5rem"}:void 0}))):r.a.createElement(me,null,d?"There are no other servers to display.":"There are no servers associated with your account.")})):r.a.createElement(h.a,{centered:!0,size:"large"}),r.a.createElement(ie,null))},le=Object(d.c)("div").withConfig({displayName:"DashboardContainer___StyledDiv",componentId:"sc-1topkxf-0"})({marginBottom:"0.5rem",display:"flex",justifyContent:"flex-end",alignItems:"center"}),oe=Object(d.c)("p").withConfig({displayName:"DashboardContainer___StyledP",componentId:"sc-1topkxf-1"})({textTransform:"uppercase",fontSize:"0.75rem",lineHeight:"1rem","--tw-text-opacity":"1",color:"hsla(211, 10%, 53%, var(--tw-text-opacity))",marginRight:"0.5rem"}),se=Object(d.c)((e=>{let{server:t,className:a}=e;const i=Object(n.useRef)(null),[c,l]=Object(n.useState)("suspended"===t.status),[s,m]=Object(n.useState)(null),d=()=>(e=>new Promise(((t,a)=>{y.a.get("/api/client/servers/".concat(e,"/resources")).then((e=>{let{data:{attributes:a}}=e;return t({status:a.current_state,isSuspended:a.is_suspended,memoryUsageInBytes:a.resources.memory_bytes,cpuUsagePercent:a.resources.cpu_absolute,diskUsageInBytes:a.resources.disk_bytes,networkRxInBytes:a.resources.network_rx_bytes,networkTxInBytes:a.resources.network_tx_bytes,uptime:a.resources.uptime})})).catch(a)})))(t.uuid).then((e=>m(e))).catch((e=>console.error(e)));Object(n.useEffect)((()=>{l((null==s?void 0:s.isSuspended)||"suspended"===t.status)}),[null==s?void 0:s.isSuspended,t.status]),Object(n.useEffect)((()=>{if(!c)return d().then((()=>{i.current=setInterval((()=>d()),3e4)})),()=>{i.current&&clearInterval(i.current)}}),[c]);const p={cpu:!1,memory:!1,disk:!1};s&&(p.cpu=0!==t.limits.cpu&&s.cpuUsagePercent>=.9*t.limits.cpu,p.memory=O(s.memoryUsageInBytes,t.limits.memory),p.disk=0!==t.limits.disk&&O(s.diskUsageInBytes,t.limits.disk));const b=0!==t.limits.disk?Object(w.a)(Object(w.c)(t.limits.disk)):"Unlimited",f=0!==t.limits.memory?Object(w.a)(Object(w.c)(t.limits.memory)):"Unlimited",v=0!==t.limits.cpu?t.limits.cpu+" %":"Unlimited";return r.a.createElement(I,{as:o.a,to:"/server/".concat(t.id),className:a,$status:null==s?void 0:s.status},r.a.createElement(N,null,r.a.createElement("div",{className:"icon mr-4"},r.a.createElement(u.a,{icon:g.Q})),r.a.createElement("div",null,r.a.createElement(_,null),r.a.createElement(R,null,t.name),r.a.createElement(E,null),!!t.description&&r.a.createElement("div",null,r.a.createElement(S,null),r.a.createElement(D,null,t.description),r.a.createElement(x,null)))),r.a.createElement(F,null,r.a.createElement(P,null,r.a.createElement(z,{icon:g.u}),r.a.createElement(T,null,t.allocations.filter((e=>e.isDefault)).map((e=>r.a.createElement(r.a.Fragment,{key:e.ip+e.port.toString()},e.alias||Object(w.b)(e.ip),":",e.port)))))),r.a.createElement(B,null,!s||c?c?r.a.createElement(U,null,r.a.createElement(A,null,"suspended"===t.status?"Suspended":"Connection Error")):t.isTransferring||t.status?r.a.createElement(H,null,r.a.createElement($,null,t.isTransferring?"Transferring":"installing"===t.status?"Installing":"restoring_backup"===t.status?"Restoring Backup":"Unavailable")):r.a.createElement(h.a,{size:"small"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(L,null,r.a.createElement(W,null,r.a.createElement(C,{icon:g.L,$alarm:p.cpu}),r.a.createElement(k,{$alarm:p.cpu},s.cpuUsagePercent.toFixed(2)," %")),r.a.createElement(J,null,"of ",v)),r.a.createElement(K,null,r.a.createElement(Q,null,r.a.createElement(C,{icon:g.K,$alarm:p.memory}),r.a.createElement(k,{$alarm:p.memory},Object(w.a)(s.memoryUsageInBytes))),r.a.createElement(q,null,"of ",f)),r.a.createElement(G,null,r.a.createElement(M,null,r.a.createElement(C,{icon:g.E,$alarm:p.disk}),r.a.createElement(k,{$alarm:p.disk},Object(w.a)(s.diskUsageInBytes))),r.a.createElement(V,null,"of ",b)),r.a.createElement(j,null))),r.a.createElement("div",{className:"status-bar"}))})).withConfig({displayName:"DashboardContainer___StyledServerRow",componentId:"sc-1topkxf-2"})(["",""],(e=>e.$_css)),me=Object(d.c)("p").withConfig({displayName:"DashboardContainer___StyledP2",componentId:"sc-1topkxf-3"})({textAlign:"center",fontSize:"0.875rem",lineHeight:"1.25rem","--tw-text-opacity":"1",color:"hsla(211, 10%, 53%, var(--tw-text-opacity))"}),de=a(291),pe=a(292);const ue=()=>{const e=Object(Z.useStoreState)((e=>e.user.data.rootAdmin));return r.a.createElement(r.a.Fragment,null,de.a.account.filter((e=>!!e.name)).map((e=>{let{path:t,name:a,exact:n=!1}=e;return r.a.createElement(o.b,{key:t,to:"/account/".concat(t).replace("//","/"),exact:n},a)})),pe.a.account.length>0&&pe.a.account.filter((e=>!!e.name)).filter((t=>!t.adminOnly||e)).map((e=>{let{path:t,name:a,exact:n=!1}=e;return r.a.createElement(o.b,{key:t,to:"/account/".concat(t).replace("//","/"),exact:n},a)})))},ge=()=>{const e=Object(l.h)(),t=Object(Z.useStoreState)((e=>e.user.data.rootAdmin));return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,null,r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(h.a,{centered:!0})},r.a.createElement(o.e,{location:e},r.a.createElement(o.c,{path:"/",exact:!0},r.a.createElement(ce,null)),de.a.account.map((e=>{let{path:t,component:a}=e;return r.a.createElement(o.c,{key:t,path:"/account/".concat(t).replace("//","/"),exact:!0},r.a.createElement(a,null))})),pe.a.account.length>0&&pe.a.account.filter((e=>!e.adminOnly||t)).map((e=>{let{path:t,component:a}=e;return r.a.createElement(o.c,{key:t,path:"/account/".concat(t).replace("//","/"),exact:!0},r.a.createElement(a,null))})),r.a.createElement(o.c,{path:"*"},r.a.createElement(s.a,null))))))};var ye=a(277),we=()=>r.a.createElement(r.a.Fragment,null),be=a(278);t.default=()=>{const e=Object(l.h)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,null),e.pathname.startsWith("/account")&&r.a.createElement(c.a,{id:"SubNavigation"},r.a.createElement(ye.a,null),r.a.createElement("div",null,r.a.createElement(ue,null),r.a.createElement(we,null)),r.a.createElement(be.a,null)),r.a.createElement(ge,null))}}}]);